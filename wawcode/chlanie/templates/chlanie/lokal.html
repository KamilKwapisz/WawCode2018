{% extends 'chlanie/base.html' %}
{% block body %}

<<<<<<< HEAD

<div class="container">
    <div class="row">
        <h1>
            <strong>{{ lokal.nazwa }}</strong>
            <br/>
            <small class="text-muted">{{ lokal.adres }}</small>
        </h1>
    </div>
=======
    {% load static %}
    <script src="{% static 'chlanie/js/jquery.barrating.min.js' %}"></script>
>>>>>>> 191efc30e59b0637c9df2da69cb46ff5c00cc42a


    <div class="container">
        <div class="row">
            <h1>
                <strong>{{ lokal.nazwa }}</strong>
                <a><i class="heart material-icons">favorite_border</i></a>
                <script type="text/javascript">
                    var username = "{{ request.user.username }}";
                    let heart = $("#heart")
                    window.onload = function () {
                        var liked = 0;
                        if (liked) {
                            $("#heart").innerHTML = "favorite";
                        }
                    }
                    heart.click(() => {
                        var fav = True;
                        if (liked) {
                            fav = False
                        }
                        $.ajax({
                            type: "GET",
                            url: '{% url "chlanie:lokale" %}',
                            data: JSON.stringify({
                                'username': username,
                                'idLokalu': lokal.id,
                                'fav': fav
                            })
                        })
                    })
                </script>
            </h1>
            <div class="row">
                <div class="col">
                    <select id="starRating">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                    <div class="col">({{rating}})</div>

                    <script type="text/javascript">
                        var username = "{{ request.user.username }}";
                        let options = {
                            theme: 'bootstrap-stars',
                            initialRating: {{rating}},
                            onSelect: function (value, text, event) {
                                if (typeof(event) !== 'undefined') {
                                    $.ajax({
                                        type: "GET",
                                        url: '{% url "chlanie:rating" %}',
                                        data: {
                                            'username': username,
                                            'idLokalu': {{lokal.id}},
                                            'ocena': value
                                        }
                                    })
                                } else console.log("dziwne")
                            }
                        }
                        $('#starRating').barrating('show', options);
                    </script>
                </div>
            </div>
            <h1>
                <small class="text-muted">{{ lokal.adres }}</small>
            </h1>

<<<<<<< HEAD
Nazwa: {{lokal.nazwa}}</br>
Adres: {{lokal.adres}}</br>
coordinates: {{coords}}</br>
=======
        </div>
>>>>>>> 191efc30e59b0637c9df2da69cb46ff5c00cc42a

        <!-- icons -->
        <div class="row">
            {% for key, value in info %}
                {% if value == True %}
                    <i class="material-icons">{{ key }}</i>
                {% endif %}
            {% endfor %}
        </div>

        <div class="row">
            <table>
                <tr>
                    <td class="text-primary">Cena wódki:</td>
                    <td>{{ lokal.cenaWodki }}</td>
                </tr>
                <tr>
                    <td class="text-primary">Cena piwa:</td>
                    <td>{{ lokal.cenaPiwa }}</td>
                </tr>
            </table>
        </div>


        <div class="row">
            Komentarze: </br>
            {% if comments %}
                <ul>
                    {% for comment in comments %}
                        <li><span class="text-primary font-weight-bold">
                {{ comment.author }}: </span>
                            {{ comment.text }}
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                brak</br>
            {% endif %}
            Dodaj komentarz:
            <form method="post">
                {% csrf_token %}
                <input class="form-control" id="{{ form.text.id_for_label }}" placeholder="Treść komentarza" type="text"
                       name="{{ form.text.html_name }}">
                <div class="col-md-16 text-center">
                    <button class="btn btn-primary">Submit!</button>
                </div>
            </form>
            <!--<a id="send"><i class="material-icons">send</i></a>-->
            <!--<script>-->
            <!--$("#send").click((ev) => {-->
            <!--ev.preventDefault();-->
            <!--$.ajax({-->
            <!--type: "GET",-->
            <!--url: '{% url "chlanie:lokale" %}',-->
            <!--data: $("#newComment").innerText,-->
            <!--success: (data) => {-->
            <!--console.log("udalo sie!");-->
            <!--console.log(data);-->

            <!--}-->
            <!--});-->
            <!--});-->
            <!--</script>-->

        </div>
    </div>
{% endblock %}
=======
>>>>>>> Stashed changes
